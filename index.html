<!DOCTYPE html>
<html lang="de">
<!-- TODO
	email links
	scrollen
	besseres rot in style.css:171
-->
<head>
    <title>FSTM GmbH</title>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Willkommen bei FSTM GmbH - Frank Schaefers Tischlermeister"/>
    <meta name="keywords"
          content="images, boxes, template, thumbnail, css3, transition, jquery, template, fullscreen, grid, draggable"/>
    <meta name="author" content="Frank Schaefers"/>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
	<style>
		.ib-main-wrapper {
    		bottom: 24px;
    		left: 18px;
    		overflow: scroll;
    		position: absolute;
    		top: -98px;
    		margin-top: 115px;
    		outline: medium none;
    		width: 100%;
		}
	</style>
    <noscript>
        <style>
            .ib-main a {
                cursor: pointer;
            }

            .ib-main-wrapper {
                position: absolute;
                top: 0px;
                bottom: 24px;
                overflow: scroll;
            }
        </style>
    </noscript>
    <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'/>
    <script id="previewTmpl" type="text/x-jquery-tmpl">
        <div id="ib-img-preview" class="ib-preview">
            <img src="${src}" alt="" class="ib-preview-img"/>

            <div class="vegas-overlay" style="margin: 0px; padding: 0px; position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; background: transparent url(images/overlay/01.png);
opacity: 0.5; "></div>
            <span class="ib-preview-descr" style="display:none;">${description}</span>

            <div class="ib-nav" style="display:none;">
                <span class="ib-nav-prev">Previous</span>
                <span class="ib-nav-next">Next</span>
            </div>
            <span class="ib-close" style="display:none;">Close Preview</span>

            <div class="ib-loading-large" style="display:none;">Loading...</div>
        </div>
    </script>
    <script id="contentTmpl" type="text/x-jquery-tmpl">
        <div id="ib-content-preview" class="ib-content-preview">
            <div class="ib-teaser" style="display:none;">{{html teaser}}</div>
            <div class="ib-content-full" style="display:none;">{{html content}}</div>
            <span class="ib-close" style="display:none;">Close Preview</span>
        </div>
    </script>
</head>
<body>
<div class="container">
    <div id="header" class="header">
        <span>Copyright &copy; 2013 </span>Frank Schaefers <a href="mailto:frankschaefers@fstm.de" style="margin-left: 35px;"><span> frankschaefers@fstm.de</span></a>
<a href="impressum.html" style="margin-left: 35px;"><span> Impressum</span></a>
                <span class="right_ab">
                    
					<a href="http://tympanus.net/codrops/2011/10/07/draggable-image-boxes-grid/" target="_new" style="font-size: 9px;">Design</a>
<a href="http://creativecommons.org/licenses/by/2.0/deed.en_GB" target="_blank" style="font-size: 9px;">licensed</a>
                </span>
    </div>
    <div id="ib-top" class="ib-top">
        <h1>FSTM GmbH: &nbsp;&nbsp;&nbsp;&nbsp; Frank Schaefers Tischlermeister <!-- <span>&nbsp;&nbsp;&nbsp;&nbsp;Design in Holz</span> -->
        </h1>
    </div>
    <div id="ib-main-wrapper" class="ib-main-wrapper">
        <div class="ib-main">

<!-- Willkommen -->

            <a href="#"><img src="images/thumbs/logo.jpg" data-largesrc="images/large/logo.jpg"
                             alt="www.fstm.de"/><span>www.fstm.de</span></a>
<a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Willkommen <span>FSTM GmbH</span></h2>
                </div>
                <div class="ib-content-full">
		    <p>Herzlich Willkommen auf der Seite f&uuml;r inidividuelle Idee und ausgefallene L&ouml;sungen.</p>
                    <p>Wir bieten ihnen die Umsetzung s&auml;mtlicher Schreinerarbeiten auf h&ouml;chstem Niveau und nach
                        individueller und pers&ouml;nlicher Kundenvorstellung. Von der Reparatur Ihrer Kommode bis hin zum vollst&auml;ndigen Ausbau Ihres Dachgeschosses - wir
                        &uuml;bernehmen Planung, Entwurf, Konstruktion und Montage.</p>
		<p>&nbsp;</p>
		    <p>Unl&ouml;sbare Raumprobleme kennen wir nicht - sprechen Sie uns an:</p>

                    <p style="margin-left:1em;">Mobil: 0163 - 439 73 37</p>

                    <p style="margin-left:1em;">Fon: 02841 - 400 694</p>

                    <p style="margin-left:1em;">Fax: 02841 - 400 695</p>

                    <p style="margin-left:1em;">eMail: frankschaefers@fstm.de</p>
                </div>
            </a>
	<a href="#"><img src="images/thumbs/schraube.jpg" data-largesrc="images/large/schraube.jpg"
                            alt="Hochwertige Beschl&auml;ge"/><span>Hochwertige Beschl&auml;ge</span></a>
	<a href="#"><img src="images/thumbs/montageteile.jpg" data-largesrc="images/large/montageteile.jpg"
                             alt="Perfekte Planung"/><span>Perfekte Planung</span></a>


<!-- Parkett &amp; Laminat -->

 <a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Parkett &amp; Laminat<span></span></h2>
                </div>
                <div class="ib-content-full">
                    <p>Bodenbel&auml;ge zum Wohlf&uuml;hlen</p>
                    <p>Vom modernen Laminat bis zum klassischen Echtholzparkett - ausschließlich beste Qualit&auml;t</p>
                </div>
            </a>
<a href="#"><img src="images/thumbs/parkett-eiche-rustikal-geoelt.jpg" data-largesrc="images/large/parkett-eiche-rustikal-geoelt.jpg"
                             alt="Parkett Eiche ge&ouml;lt"/><span>Parkett Eiche ge&ouml;lt</span></a>
<a href="#"><img src="images/thumbs/parkett-eiche-geraeuchert.jpg" data-largesrc="images/large/parkett-eiche-geraeuchert.jpg"
                             alt="Parkett Eiche kernger&auml;uchert"/><span>Parkett Eiche kernger&auml;uchert</span></a>
<a href="#"><img src="images/thumbs/parkettuebergang.jpg" data-largesrc="images/large/parkettuebergang.jpg"
                             alt="Parkett Zebrano lackiert"/><span>Parkett Zebrano lackiert</span></a>
<a href="#"><img src="images/thumbs/parkett-eiche-geoelt.jpg" data-largesrc="images/large/parkett-eiche-geoelt.jpg"
                             alt="Parkett Eiche ge&ouml;lt"/><span>Parkett Eiche ge&ouml;lt</span></a>



<!-- M&ouml;bel -->


 <a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>M&ouml;belbau <span>individuell &amp; funktional</span></h2>
                </div>
                <div class="ib-content-full">
                    <p>Individuelle L&ouml;sungen, zugeschnitten auf Ihre Bed&uuml;rfnisse - jede Nische perfekt genutzt</p>
                    <p>Regale</p>
                    <p>Einbauschr&auml;nke</p>
                    <p>Designm&ouml;bel</p>
                </div>
            </a>

<a href="#"><img src="images/thumbs/einbauregal1.jpg" data-largesrc="images/large/einbauregal1.jpg"
                             alt="Einbauregal"/><span>Einbauregal</span></a>
<a href="#"><img src="images/thumbs/einbauschrank1.jpg" data-largesrc="images/large/einbauschrank1.jpg"
                             alt="Schlafzimmerschrank"/><span>Schlafzimmerschrank</span></a>
<a href="#"><img src="images/thumbs/einbauschreibtisch1.jpg" data-largesrc="images/large/einbauschreibtisch1.jpg"
                             alt="B&uuml;roecke Dachgeschoss"/><span>B&uuml;roecke Dachgeschoss</span></a>
<a href="#"><img src="images/thumbs/einbauschreibtisch2.jpg" data-largesrc="images/large/einbauschreibtisch2.jpg"
                             alt="Schreibtisch mobil"/><span>Schreibtisch mobil</span></a>
            <a href="#"><img src="images/thumbs/bettkasten.jpg" data-largesrc="images/large/bettkasten.jpg"
                             alt="Bettunterbau"/><span>Bettunterbau</span></a>
            <a href="#"><img src="images/thumbs/badunterschrank.jpg" data-largesrc="images/large/badunterschrank.jpg"
                             alt="Waschtisch"/><span>Waschtisch</span></a>
<a href="#"><img src="images/thumbs/kueche1.jpg" data-largesrc="images/large/kueche1.jpg"
                             alt="Glasarbeitsplatte"/><span>Glasarbeitsplatte</span></a>
<a href="#"><img src="images/thumbs/lichtregal1.jpg" data-largesrc="images/large/lichtregal1.jpg"
                             alt="Designobjekt Lichtregal"/><span>Designobjekt Lichtregal</span></a>
<a href="#"><img src="images/thumbs/garderobe1.jpg" data-largesrc="images/large/garderobe1.jpg"
                             alt="Garderobe Buche &amp; Weiß"/><span>Garderobe Buche &amp; Weiß</span></a>
<a href="#"><img src="images/thumbs/spiegelschrank1.jpg" data-largesrc="images/large/spiegelschrank1.jpg"
                             alt="Spiegelschrank Bad"/><span>Spiegelschrank Bad</span></a>
	<a href="#"><img src="images/thumbs/arbeitsplatte1.jpg" data-largesrc="images/large/arbeitsplatte1.jpg"
                             alt="K&uuml;chenarbeitsplatte"/><span>K&uuml;chenarbeitsplatte</span></a>
	<a href="#"><img src="images/thumbs/arbeitsplatte2.jpg" data-largesrc="images/large/arbeitsplatte2.jpg"
                             alt="Edelstahl-Einlage"/><span>Edelstahl-Einlage</span></a>

<!-- Innenausbau -->


 <a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Innenausbau <span>Raumkonzepte</span></h2>
                </div>
                <div class="ib-content-full">
                    <p>Leichtbauw&auml;nde</p>
                    <p>Gipskartonverkleidungen</p>
                    <p>abgeh&auml;ngte Decken</p>
                    <p>Dachbodenausbau</p>
                </div>
            </a>

<a href="#"><img src="images/thumbs/dachausbau1.jpg" data-largesrc="images/large/dachausbau1.jpg"
                             alt="Dachausbau"/><span>Dachausbau</span></a>
<a href="#"><img src="images/thumbs/decke1.jpg" data-largesrc="images/large/decke1.jpg"
                             alt="Abgeh&auml;ngte Decke, Einbauspots"/><span>Abgeh&auml;ngte Decke, Einbauspots</span></a>
            <a href="#"><img src="images/thumbs/decken.jpg" data-largesrc="images/large/decken.jpg"
                             alt="Akustikdecke"/><span>Akustikdecke</span></a>
<a href="#"><img src="images/thumbs/saunabereich1.jpg" data-largesrc="images/large/saunabereich1.jpg"
                             alt="Saunabereich"/><span>Saunabereich</span></a>
<a href="#"><img src="images/thumbs/saunabereich2.jpg" data-largesrc="images/large/saunabereich2.jpg"
                             alt="Saunabereich"/><span>Saunabereich</span></a>

<!-- Treppen -->
 <a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Treppen <span></span></h2>
                </div>
                <div class="ib-content-full">
                    <p>Von gerade bis geschwungen, von klassisch bis exravagant - Ihr Wunsch ist unsere Herausforderung.</p>
                </div>
            </a>
            <a href="#"><img src="images/thumbs/treppe1.jpg" data-largesrc="images/large/treppe1.jpg"
                             alt="Offene Treppe, Lack &amp; Edelstahl"/><span>Offene Treppe Lack &amp; Edelstahl</span></a>

<!-- Garten -->

<a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Holz im Freien<span>Außengestaltung</span></h2>
                </div>
                <div class="ib-content-full">
		    <p>In enger Zusammenarbeit mit renommiertern Landschaftsg&auml;rtnern bieten wir Ihnen die Gestaltung Ihres Gartens aus einer Hand - von der Terrasse bis zur Bepflanzung.</p>
		    <p>Holzterrassen</p>
		    <p>Gartenz&auml;une</p>
		    <p>Terrassen&uuml;berdachungen</p>
		    <p>Carports</p>
		    <p>Vord&auml;cher</p>
                </div>
            </a>
<a href="#"><img src="images/thumbs/garten1.jpg" data-largesrc="images/large/garten1.jpg"
                             alt="Garten Komplettgestaltung"/><span>Garten Komplettgestaltung</span></a>
<a href="#"><img src="images/thumbs/kinderbank1.jpg" data-largesrc="images/large/kinderbank1.jpg"
                             alt="Sitzbank f&uuml;r Kinder"/><span>Sitzbank f&uuml;r Kinder</span></a>
            <a href="#"><img src="images/thumbs/terrasse4.jpg" data-largesrc="images/large/terrasse4.jpg"
                             alt="Garten Komplettgestaltung"/><span>Garten Komplettgestaltung</span></a>
            <a href="#"><img src="images/thumbs/terrasse5.jpg" data-largesrc="images/large/terrasse5.jpg"
                             alt="Terrasse Bangkirai"/><span>Terrasse Bangkirai</span></a>
            <a href="#"><img src="images/thumbs/terrasse1.jpg" data-largesrc="images/large/terrasse1.jpg"
                             alt="Dachterrasse Bangkirai"/><span>Dachterrasse Bangkirai</span></a>
            <a href="#"><img src="images/thumbs/terrasse2.jpg" data-largesrc="images/large/terrasse2.jpg"
                             alt="Dachterrasse Bangkirai"/><span>Dachterrasse Bangkirai</span></a>
            <a href="#"><img src="images/thumbs/terrasse3.jpg" data-largesrc="images/large/terrasse3.jpg"
                             alt="Dachterrasse Bangkirai"/><span>Dachterrasse Bangkirai</span></a>
<a href="#"><img src="images/thumbs/balkon1.jpg" data-largesrc="images/large/balkon1.jpg"
                             alt="Balkon Bangkirai &amp; Spots"/><span>Balkon Bangkirai &amp; Spots</span></a>
<a href="#"><img src="images/thumbs/balkon2.jpg" data-largesrc="images/large/balkon2.jpg"
                             alt="Balkon Bangkirai &amp; Spots"/><span>Balkon Bangkirai &amp; Spots</span></a>

            <a href="#"><img src="images/thumbs/zaun1.jpg" data-largesrc="images/large/zaun1.jpg"
                             alt="Gartenzaun Bangkirai"/><span>Gartenzaun Bangkirai</span></a>
<a href="#"><img src="images/thumbs/stallungen.jpg" data-largesrc="images/large/stallungen.jpg"
                             alt="Tierstall"/><span>Tierstall</span></a>

<!-- Fenster &amp; T&uuml;ren -->

<a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Fenster &amp; T&uuml;ren</h2>
                </div>
                <div class="ib-content-full">
		    <p>Fenster</p>
		    <p>Festverglasungen</p>
		    <p>Innent&uuml;ren</p>
		    <p>Wohnungst&uuml;ren</p>
		    <p>Haust&uuml;ren</p>
                </div>
            </a>


<a href="#"><img src="images/thumbs/fenster1.jpg" data-largesrc="images/large/fenster1.jpg"
                             alt="Giebelfensteranlage"/><span>Giebelfensteranlage</span></a>
<a href="#"><img src="images/thumbs/haustuer1.jpg" data-largesrc="images/large/haustuer1.jpg"
                             alt="Haust&uuml;ranlage"/><span>Haust&uuml;ranlage</span></a>
<a href="#"><img src="images/thumbs/zimmertuer1.jpg" data-largesrc="images/large/zimmertuer1.jpg"
                             alt="Zimmert&uuml;er Querfurniert"/><span>Zimmert&uuml;er Querfurniert</span></a>
<a href="#"><img src="images/thumbs/flurtuer1.jpg" data-largesrc="images/large/flurtuer1.jpg"
                             alt="Dielent&uuml;r Eiche &amp; Glas"/><span>Dielent&uuml;r Eiche &amp; Glas</span></a>
<a href="#"><img src="images/thumbs/flurtuer2.jpg" data-largesrc="images/large/flurtuer2.jpg"
                             alt="Dielent&uuml;r Eiche &amp; Glas"/><span>Dielent&uuml;r Eiche &amp; Glas</span></a>
 	    
<! -- Impressum -->

            <a href="#" class="ib-content">
                <div class="ib-teaser">
                    <h2>Kontakt <span>frankschaefers@fstm.de</span></h2>
                </div>
                <div class="ib-content-full">
                    <p>FSTM GmbH
                        <br>Frank Schaefers
                        <br>Trakehnenstr. 8b
                        <br>47445 Moers</p>

                    <p>Mobil: 0163 - 439 73 37</p>

                    <p>Fon: 02841 - 400 694</p>

                    <p>Fax: 02841 - 400 695</p>

                    <p>eMail: frankschaefers@fstm.de</p>
                </div>
            </a>
<a href="#"><img src="images/thumbs/cncpresenter.jpg" data-largesrc="images/large/cncpresenter.jpg"
                             alt="Promotion-Presenter"/><span>Promotion-Presenter</span></a>
           
            <div class="clr"></div>
        </div>
        <!-- ib-main -->
    </div>
    <!-- ib-main-wrapper -->
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="js/jquery.kinetic.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript">
$(function() {

var $ibWrapper = $('#ib-main-wrapper'),

Template = (function() {

// true if dragging the container
var kinetic_moving = false,
// current index of the opened item
current = -1,
// true if the item is being opened / closed
isAnimating = false,
// items on the grid
$ibItems = $ibWrapper.find('div.ib-main > a'),
// image items on the grid
$ibImgItems = $ibItems.not('.ib-content'),
// total image items on the grid
imgItemsCount = $ibImgItems.length,
init = function() {

// add a class ib-image to the image items
$ibImgItems.addClass('ib-image');
// apply the kinetic plugin to the wrapper
loadKinetic();
// load some events
initEvents();

},
loadKinetic = function() {

setWrapperSize();

$ibWrapper.kinetic({
moved : function() {

kinetic_moving = true;

},
stopped : function() {

kinetic_moving = false;

}
});

},
setWrapperSize = function() {

var containerMargins = $('#ib-top').outerHeight(true) + $('#header').outerHeight(true) + parseFloat(
$ibItems.css('margin-top') );
$ibWrapper.css( 'height', $(window).height() - containerMargins )

},
initEvents = function() {

// open the item only if not dragging the container
$ibItems.bind('click.ibTemplate', function( event ) {

if( !kinetic_moving )
openItem( $(this) );

return false;

});

// on window resize, set the wrapper and preview size accordingly
$(window).bind('resize.ibTemplate', function( event ) {

setWrapperSize();

$('#ib-img-preview, #ib-content-preview').css({
width : $(window).width(),
height : $(window).height()
})

});

},
openItem = function( $item ) {

if( isAnimating ) return false;

// if content item
if( $item.hasClass('ib-content') ) {

isAnimating = true;
current = $item.index('.ib-content');
loadContentItem( $item, function() { isAnimating = false; } );

}
// if image item
else {

isAnimating = true;
current = $item.index('.ib-image');
loadImgPreview( $item, function() { isAnimating = false; } );

}

},
// opens one image item (fullscreen)
loadImgPreview = function( $item, callback ) {

var largeSrc = $item.children('img').data('largesrc'),
description = $item.children('span').text(),
largeImageData = {
src : largeSrc,
description : description
};

// preload large image
$item.addClass('ib-loading');

preloadImage( largeSrc, function() {

$item.removeClass('ib-loading');

var hasImgPreview = ( $('#ib-img-preview').length > 0 );

if( !hasImgPreview )
$('#previewTmpl').tmpl( largeImageData ).insertAfter( $ibWrapper );
else
$('#ib-img-preview').children('img.ib-preview-img')
.attr( 'src', largeSrc )
.end()
.find('span.ib-preview-descr')
.text( description );

//get dimentions for the image, based on the windows size
var dim = getImageDim( largeSrc );

$item.removeClass('ib-img-loading');

//set the returned values and show/animate preview
$('#ib-img-preview').css({
width : $item.width(),
height : $item.height(),
left : $item.offset().left,
top : $item.offset().top
}).children('img.ib-preview-img').hide().css({
width : dim.width,
height : dim.height,
left : dim.left,
top : dim.top
}).fadeIn( 400 ).end().show().animate({
width : $(window).width(),
left : 0
}, 500, 'easeOutExpo', function() {

$(this).animate({
height : $(window).height(),
top : 0
}, 400, function() {

var $this = $(this);
$this.find('span.ib-preview-descr, span.ib-close').show()
if( imgItemsCount > 1 )
$this.find('div.ib-nav').show();

if( callback ) callback.call();

});

});

if( !hasImgPreview )
initImgPreviewEvents();

} );

},
// opens one content item (fullscreen)
loadContentItem = function( $item, callback ) {

var hasContentPreview = ( $('#ib-content-preview').length > 0 ),
teaser = $item.children('div.ib-teaser').html(),
content = $item.children('div.ib-content-full').html(),
contentData = {
teaser : teaser,
content : content
};

if( !hasContentPreview )
$('#contentTmpl').tmpl( contentData ).insertAfter( $ibWrapper );

//set the returned values and show/animate preview
$('#ib-content-preview').css({
width : $item.width(),
height : $item.height(),
left : $item.offset().left,
top : $item.offset().top
}).show().animate({
width : $(window).width(),
left : 0
}, 500, 'easeOutExpo', function() {

$(this).animate({
height : $(window).height(),
top : 0
}, 400, function() {

var $this = $(this),
$teaser = $this.find('div.ib-teaser'),
$content= $this.find('div.ib-content-full'),
$close = $this.find('span.ib-close');

if( hasContentPreview ) {
$teaser.html( teaser )
$content.html( content )
}

$teaser.show();
$content.show();
$close.show();

if( callback ) callback.call();

});

});

if( !hasContentPreview )
initContentPreviewEvents();

},
// preloads an image
preloadImage = function( src, callback ) {

$('<img/>').load(function(){

if( callback ) callback.call();

}).attr( 'src', src );

},
// load the events for the image preview : navigation ,close button, and window resize
initImgPreviewEvents = function() {

var $preview = $('#ib-img-preview');

$preview.find('span.ib-nav-prev').bind('click.ibTemplate', function( event ) {

navigate( 'prev' );

}).end().find('span.ib-nav-next').bind('click.ibTemplate', function( event ) {

navigate( 'next' );

}).end().find('span.ib-close').bind('click.ibTemplate', function( event ) {

closeImgPreview();

});

//resizing the window resizes the preview image
$(window).bind('resize.ibTemplate', function( event ) {

var $largeImg = $preview.children('img.ib-preview-img'),
dim = getImageDim( $largeImg.attr('src') );

$largeImg.css({
width : dim.width,
height : dim.height,
left : dim.left,
top : dim.top
})

});

},
// load the events for the content preview : close button
initContentPreviewEvents = function() {

$('#ib-content-preview').find('span.ib-close').bind('click.ibTemplate', function( event ) {

closeContentPreview();

});

},
// navigate the image items in fullscreen mode
navigate = function( dir ) {

if( isAnimating ) return false;

isAnimating = true;

var $preview = $('#ib-img-preview'),
$loading = $preview.find('div.ib-loading-large');

$loading.show();

if( dir === 'next' ) {

( current === imgItemsCount - 1 ) ? current = 0 : ++current;

}
else if( dir === 'prev' ) {

( current === 0 ) ? current = imgItemsCount - 1 : --current;

}

var $item = $ibImgItems.eq( current ),
largeSrc = $item.children('img').data('largesrc'),
description = $item.children('span').text();

preloadImage( largeSrc, function() {

$loading.hide();

//get dimentions for the image, based on the windows size
var dim = getImageDim( largeSrc );

$preview.children('img.ib-preview-img')
.attr( 'src', largeSrc )
.css({
width : dim.width,
height : dim.height,
left : dim.left,
top : dim.top
})
.end()
.find('span.ib-preview-descr')
.text( description );

$ibWrapper.scrollTop( $item.offset().top )
.scrollLeft( $item.offset().left );

isAnimating = false;

});

},
// closes the fullscreen image item
closeImgPreview = function() {

if( isAnimating ) return false;

isAnimating = true;

var $item = $ibImgItems.eq( current );

$('#ib-img-preview').find('span.ib-preview-descr, div.ib-nav, span.ib-close')
.hide()
.end()
.animate({
height : $item.height(),
top : $item.offset().top
}, 500, 'easeOutExpo', function() {

$(this).animate({
width : $item.width(),
left : $item.offset().left
}, 400, function() {

$(this).fadeOut(function() {isAnimating = false;});

} );

});

},
// closes the fullscreen content item
closeContentPreview = function() {

if( isAnimating ) return false;

isAnimating = true;

var $item = $ibItems.not('.ib-image').eq( current );

$('#ib-content-preview').find('div.ib-teaser, div.ib-content-full, span.ib-close')
.hide()
.end()
.animate({
height : $item.height(),
top : $item.offset().top
}, 500, 'easeOutExpo', function() {

$(this).animate({
width : $item.width(),
left : $item.offset().left
}, 400, function() {

$(this).fadeOut(function() {isAnimating = false;});

} );

});

},
// get the size of one image to make it full size and centered
getImageDim = function( src ) {

var img = new Image();
img.src = src;

var w_w = $(window).width(),
w_h = $(window).height(),
r_w = w_h / w_w,
i_w = img.width,
i_h = img.height,
r_i = i_h / i_w,
new_w, new_h,
new_left, new_top;

if( r_w > r_i ) {

new_h = w_h;
new_w = w_h / r_i;

}
else {

new_h = w_w * r_i;
new_w = w_w;

}

return {
width : new_w,
height : new_h,
left : (w_w - new_w) / 2,
top : (w_h - new_h) / 2
};

};

return { init : init };

})();

Template.init();

});
</script>
</body>
</html>	
